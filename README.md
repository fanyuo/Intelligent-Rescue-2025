# Intelligent-Rescue-2025 项目文档

## 项目概述
这是一个用于2025年工程实践与创新能力大赛国赛智能救援赛道的机器人控制系统。系统采用Jetson系列主控板作为上位机，STM32F103作为下位机，通过串口通信实现控制。视觉识别使用YOLOv5模型检测小球和安全区域。

## 项目结构

Intelligent-Rescue-2025/  
├── config.py # 全局配置文件  
├── control.py # 运动控制核心模块  
├── main.py # 主程序  
├── uart.py # 串口通信模块  
├── vision.py # 视觉处理模块  
└── README.md # 项目文档

## 硬件配置

- **上位机**：Jetson系列开发板
- **下位机**：STM32F103
- **执行机构**：
  - 2个直流电机（差速驱动）
  - 2个舵机（用于抓取机构）
- **通信方式**：UART串口通信

## 软件依赖

- Python 3.x
- OpenCV
- PyYOLO (ultralytics)
- PySerial
- NumPy

安装依赖:  
```bash
pip install opencv-python ultralytics pyserial numpy
```

## 配置文件说明 (config.py)

包含所有可配置参数：

- 队伍选择（红队/蓝队）  
- 模型权重文件路径  
- 视频输出设置  
- 区域坐标定义（抓取区、准备区、持球区等）  
- 舵机角度设置  
- 串口设备配置  

## 主要模块功能

### 1. 运动控制模块 (control.py)
实现机器人的基本运动控制：
- 前进/后退  
- 左转/右转  
- 停止  
- 抓取/释放动作  
- 基于PID的精确运动控制

### 2. 串口通信模块 (uart.py)
提供与下位机的通信接口：  
- 串口初始化与关闭  
- 数据包构建与CRC校验  
- 电机速度与舵机角度设置  
- 命令执行与状态读取

### 3. 视觉处理模块 (vision.py)
实现目标检测与视觉处理：  
- 视频流捕获与处理  
- 目标球体检测  
- 安全区域检测  
- 位置判断与状态检测  

### 4. 主程序 (main.py)
实现状态机控制逻辑：

- 状态0：寻找球体  
- 状态1：执行抓取  
- 状态2：寻找安全区域  
- 状态3：释放球体并执行后续操作  

## 使用说明
1. 配置config.py中的参数（队伍选择、串口设备等）
2. 确保模型权重文件路径正确
3. 连接硬件设备
4. 运行主程序：
```bash
python3 main.py
```

## 测试程序
各模块提供测试程序：
- control.py：电机和舵机测试
- uart.py：串口通信测试
- vision.py：视觉识别测试

#### 运行测试：
```bash
python3 模块名.py
```

## 注意事项
1. 首次运行时需确保模型权重文件存在
2. 根据实际硬件调整串口设备路径
3. 区域坐标需根据实际摄像头视野调整
4. 运行前确保所有硬件连接正确

## 开发团队
北京建筑大学 工程实践创新中心314工作室：
- 樊彧
- 覃启轩

## 许可证
本项目代码开源，遵循MIT许可证。